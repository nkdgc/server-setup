# 事前準備

bootstrap(踏み台サーバ)に作業用個人アカウントを作成する。以降の手順は以下で作成したユーザで作業をすることを前提とする。

```bash
# ユーザ作成
username="ndeguchi"
sudo adduser ${username}

# sudo group に追加
sudo usermod -aG sudo ${username}

# docker group に追加
sudo usermod -aG docker ${username}

# kube-config をコピー
sudo mkdir -p /home/${username}/.kube
sudo cp -i ~/.kube/config /home/${username}/.kube/
sudo chown -R ${username}:${username} /home/${username}/.kube

# ユーザ切り替え
sudo su - ${username}

# alias, completion 設定
cat <<EOF >> ~/.bashrc
source <(kubectl completion bash)
alias k=kubectl
source <(kubectl completion bash | sed -e 's/kubectl/k/g')
EOF

source ~/.bashrc

# docker コマンドを実行できることを確認
docker ps

# kubectl で情報を取得できることを確認
k get pod -A

# kubectl context 確認
k config get-contexts

# Namespace 作成
k create ns ${USER}
  # -> namespace/ndeguchi created

# Default Namespace 切り替え
kubectl config set-context $(kubectl config current-context) --namespace=${USER}
  # -> Context "xxxxx-admin@xxxxx" modified.

# kubectl context 確認
k config get-contexts
  # -> NAMESPACE が自身のユーザ名であることを確認する
  #    CURRENT   NAME                  CLUSTER   AUTHINFO       NAMESPACE
  #    *         xxxxxx-admin@xxxxxx   xxxxxx    xxxxxx-admin   ndeguchi
```

